"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[50],{7841:(_,z,d)=>{d.r(z),d.d(z,{LegacyDestination:()=>D,ajsDestinations:()=>$});var a=d(1635),y=d(2717),m=d(8471),M=d(9014),N=d(3871),A=d(1292),E=d(3175),j=d(2817),F=d(1793),L=d(2140),O=d(8222),R=d(5674),B=d(6164),P=d(4221),H=d(9328);function I(i){return i.toLowerCase().replace(".","").replace(/\s+/g,"-")}function Y(i,t){return void 0===t&&(t=!1),t?btoa(i).replace(/=/g,""):void 0}function G(i,t,e,n){return(0,a.sH)(this,void 0,void 0,function(){var s,r,o,l,u,h;return(0,a.YH)(this,function(c){switch(c.label){case 0:s=I(t),r=Y(s,n),o=(0,P.YM)(),l="".concat(o,"/integrations/").concat(r??s,"/").concat(e,"/").concat(r??s,".dynamic.js.gz"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,(0,H.k)(l)];case 2:return c.sent(),function X(i,t,e){var n,s;try{var r=(null!==(s=null===(n=window?.performance)||void 0===n?void 0:n.getEntriesByName(i,"resource"))&&void 0!==s?s:[])[0];r&&t.stats.gauge("legacy_destination_time",Math.round(r.duration),(0,a.fX)([e],r.duration<100?["cached"]:[],!0))}catch{}}(l,i,t),[3,4];case 3:throw u=c.sent(),i.stats.gauge("legacy_destination_time",-1,["plugin:".concat(t),"failed"]),u;case 4:return h=window["".concat(s,"Deps")],[4,Promise.all(h.map(function(p){return(0,H.k)(o+p+".gz")}))];case 5:return c.sent(),window["".concat(s,"Loader")](),[2,window["".concat(s,"Integration")]]}})})}var C=d(5774),V=function(i,t){var e,r=t.versionSettings,o="unbundled"!==t.bundlingStatus&&("browser"===t.type||(null===(e=r?.componentTypes)||void 0===e?void 0:e.includes("browser")));return!i.startsWith("Segment")&&"Iterable"!==i&&o},K=function(i,t){return!1===t[i]||!1===t.All&&void 0===t[i]},w=d(744),U=d(4628);function Z(i,t){return(0,a.sH)(this,void 0,void 0,function(){var e,n=this;return(0,a.YH)(this,function(s){switch(s.label){case 0:return e=[],(0,m.a)()?[2,t]:[4,(0,L._)(function(){return t.length>0&&(0,m.s)()},function(){return(0,a.sH)(n,void 0,void 0,function(){var r;return(0,a.YH)(this,function(u){switch(u.label){case 0:return(r=t.pop())?[4,(0,E.C)(r,i)]:[2];case 1:return u.sent()instanceof M.o||e.push(r),[2]}})})})];case 1:return s.sent(),e.map(function(r){return t.pushWithBackoff(r)}),[2,t]}})})}var D=function(){function i(t,e,n,s,r,o){void 0===s&&(s={});var l=this;this.options={},this.type="destination",this.middleware=[],this.initializePromise=(0,U.u)(),this.flushing=!1,this.name=t,this.version=e,this.settings=(0,a.Cl)({},s),this.disableAutoISOConversion=r.disableAutoISOConversion||!1,this.integrationSource=o,this.settings.type&&"browser"===this.settings.type&&delete this.settings.type,this.initializePromise.promise.then(function(u){return l._initialized=u},function(){}),this.options=r,this.buffer=r.disableClientPersistence?new O.M(4,[]):new R.x(4,"".concat(n,":dest-").concat(t)),this.scheduleFlush()}return i.prototype.isLoaded=function(){return!!this._ready},i.prototype.ready=function(){var t=this;return this.initializePromise.promise.then(function(){var e;return null!==(e=t.onReady)&&void 0!==e?e:Promise.resolve()})},i.prototype.load=function(t,e){var n;return(0,a.sH)(this,void 0,void 0,function(){var r,o=this;return(0,a.YH)(this,function(l){switch(l.label){case 0:return this._ready||void 0!==this.onReady?[2]:null!==(n=this.integrationSource)&&void 0!==n?(r=n,[3,3]):[3,1];case 1:return[4,G(t,this.name,this.version,this.options.obfuscate)];case 2:r=l.sent(),l.label=3;case 3:this.integration=function W(i,t,e){var n;"Integration"in i?(i({user:function(){return e.user()},addIntegration:function(){}}),n=i.Integration):n=i;var r=new n(t);return r.analytics=e,r}(r,this.settings,e),this.onReady=new Promise(function(u){o.integration.once("ready",function(){o._ready=!0,u(!0)})}),this.integration.on("initialize",function(){o.initializePromise.resolve(!0)});try{(0,w.y)(t,{integrationName:this.name,methodName:"initialize",type:"classic"}),this.integration.initialize()}catch(u){throw(0,w.y)(t,{integrationName:this.name,methodName:"initialize",type:"classic",didError:!0}),this.initializePromise.resolve(!1),u}return[2]}})})},i.prototype.unload=function(t,e){return function J(i,t,e){return(0,a.sH)(this,void 0,void 0,function(){var n,s,r,o;return(0,a.YH)(this,function(l){return n=(0,P.YM)(),s=I(i),r=Y(i,e),o="".concat(n,"/integrations/").concat(r??s,"/").concat(t,"/").concat(r??s,".dynamic.js.gz"),[2,(0,H.d)(o)]})})}(this.name,this.version,this.options.obfuscate)},i.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.middleware=(t=this.middleware).concat.apply(t,e)},i.prototype.shouldBuffer=function(t){return"page"!==t.event.type&&((0,m.a)()||!0!==this._ready||!0!==this._initialized)},i.prototype.send=function(t,e,n){var s,r;return(0,a.sH)(this,void 0,void 0,function(){var o,l,u,h,c,p;return(0,a.YH)(this,function(f){switch(f.label){case 0:return this.shouldBuffer(t)?(this.buffer.push(t),this.scheduleFlush(),[2,t]):(o=null===(r=null===(s=this.options)||void 0===s?void 0:s.plan)||void 0===r?void 0:r.track,l=t.event.event,o&&l&&"Segment.io"!==this.name&&((0,j.j)(o,u=o[l])?t.updateEvent("integrations",(0,a.Cl)((0,a.Cl)({},t.event.integrations),u?.integrations)):(t.updateEvent("integrations",(0,a.Cl)((0,a.Cl)({},t.event.integrations),{All:!1,"Segment.io":!0})),t.cancel(new N.d({retry:!1,reason:"Event ".concat(l," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"}))),u?.enabled&&!1===u?.integrations[this.name]&&t.cancel(new N.d({retry:!1,reason:"Event ".concat(l," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"}))),[4,(0,B.applyDestinationMiddleware)(this.name,t.event,this.middleware)]);case 1:if(null===(h=f.sent()))return[2,t];c=new e(h,{traverse:!this.disableAutoISOConversion}),(0,w.y)(t,{integrationName:this.name,methodName:n,type:"classic"}),f.label=2;case 2:return f.trys.push([2,5,,6]),this.integration?[4,this.integration.invoke.call(this.integration,n,c)]:[3,4];case 3:f.sent(),f.label=4;case 4:return[3,6];case 5:throw p=f.sent(),(0,w.y)(t,{integrationName:this.name,methodName:n,type:"classic",didError:!0}),p;case 6:return[2,t]}})})},i.prototype.track=function(t){return(0,a.sH)(this,void 0,void 0,function(){return(0,a.YH)(this,function(e){return[2,this.send(t,y.Track,"track")]})})},i.prototype.page=function(t){var e;return(0,a.sH)(this,void 0,void 0,function(){return(0,a.YH)(this,function(n){switch(n.label){case 0:return!(null===(e=this.integration)||void 0===e)&&e._assumesPageview&&!this._initialized&&this.integration.initialize(),[4,this.initializePromise.promise];case 1:return n.sent(),[2,this.send(t,y.Page,"page")]}})})},i.prototype.identify=function(t){return(0,a.sH)(this,void 0,void 0,function(){return(0,a.YH)(this,function(e){return[2,this.send(t,y.Identify,"identify")]})})},i.prototype.alias=function(t){return(0,a.sH)(this,void 0,void 0,function(){return(0,a.YH)(this,function(e){return[2,this.send(t,y.Alias,"alias")]})})},i.prototype.group=function(t){return(0,a.sH)(this,void 0,void 0,function(){return(0,a.YH)(this,function(e){return[2,this.send(t,y.Group,"group")]})})},i.prototype.scheduleFlush=function(){var t=this;this.flushing||setTimeout(function(){return(0,a.sH)(t,void 0,void 0,function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:return(0,m.a)()||!0!==this._ready||!0!==this._initialized?(this.scheduleFlush(),[2]):(this.flushing=!0,e=this,[4,Z(this,this.buffer)]);case 1:return e.buffer=n.sent(),this.flushing=!1,this.buffer.todo>0&&this.scheduleFlush(),[2]}})})},5e3*Math.random())},i}();function $(i,t,e,n,s,r){var o,l;if(void 0===e&&(e={}),void 0===n&&(n={}),(0,A.S)())return[];t.plan&&((n=n??{}).plan=t.plan);var u=null!==(l=null===(o=t.middlewareSettings)||void 0===o?void 0:o.routingRules)&&void 0!==l?l:[],h=t.integrations,c=n.integrations,p=(0,F.J)(t,n??{}),f=r?.reduce(function(v,b){var g;return(0,a.Cl)((0,a.Cl)({},v),((g={})[function Q(i){return("Integration"in i?i.Integration:i).prototype.name}(b)]=b,g))},{}),k=new Set((0,a.fX)((0,a.fX)([],Object.keys(h).filter(function(v){return V(v,h[v])}),!0),Object.keys(f||{}).filter(function(v){return(0,C.Qd)(h[v])||(0,C.Qd)(c?.[v])}),!0));return Array.from(k).filter(function(v){return!K(v,e)}).map(function(v){var g=function T(i){var t,e,n,s;return null!==(s=null!==(e=null===(t=i?.versionSettings)||void 0===t?void 0:t.override)&&void 0!==e?e:null===(n=i?.versionSettings)||void 0===n?void 0:n.version)&&void 0!==s?s:"latest"}(h[v]),S=new D(v,g,i,p[v],n,f?.[v]);return u.filter(function(q){return q.destinationName===v}).length>0&&s&&S.addMiddleware(s),S})}}}]);